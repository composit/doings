if( document.getElementById( "project-<%= @project.id %>" ) ) {
  <% if( @project.closed_at ) %>
    $( "#project-<%= @project.id %>" ).html( "<%= @project.name %> has been closed" );
  <% else %>
    $( "#project-<%= @project.id %>" ).html( "<%= escape_javascript( render( :partial => "line", :object => @project ) ) %>" );
  <% end %>
} else {
  $( "#projects" ).append( "<%= escape_javascript( render( :partial => "line", :object => @project ) ) %>" );
  $( "#new-project" ).show();
  $( "#new-project-form" ).hide();
  $( "#new-project-form" ).html( "<%= escape_javascript( render( :partial => "form", :object => generate_new_project( @project.client ) ) ) %>" );
}
$( "#project-<%= @project.id %> .expand-project-details" ).hide();
$( "#project-<%= @project.id %> .collapse-project-details" ).show();
$( "#project-<%= @project.id %> .details" ).html( "<%= escape_javascript( render( :partial => "details", :object => @project ) ) %>" );
